{% extends "layouts/base.html" %}
{% block title %}修改密碼 | TWStock Pro{% endblock %}

{% block extra_css %}
<style>
    .cp-page {
        min-height: 60vh;
        display: flex;
        align-items: center;
        padding: 3rem 0;
    }

    .cp-card {
        max-width: 480px;
        margin: 0 auto;
        width: 100%;
        background: var(--bg-panel);
        border: 1px solid var(--b-medium);
        border-radius: 18px;
        padding: 40px 36px;
        box-shadow: 0 8px 40px rgba(0, 0, 0, 0.25);
    }

    .cp-icon {
        width: 52px;
        height: 52px;
        background: linear-gradient(135deg, var(--c-blue), #6366F1);
        border-radius: 14px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 22px;
        color: #fff;
        margin: 0 auto 22px;
        box-shadow: 0 4px 16px rgba(59, 130, 246, 0.35);
    }

    .form-error {
        font-size: var(--text-xs);
        color: var(--c-red);
        margin-top: 5px;
        display: flex;
        align-items: center;
        gap: 4px;
    }

    .pw-tip {
        background: rgba(59, 130, 246, 0.06);
        border: 1px solid rgba(59, 130, 246, 0.15);
        border-radius: var(--r-md);
        padding: 10px 14px;
        font-size: var(--text-xs);
        color: var(--t-secondary);
        margin-bottom: 22px;
        display: flex;
        gap: 8px;
        align-items: flex-start;
    }

    .pw-tip i {
        color: var(--c-blue);
        flex-shrink: 0;
        margin-top: 1px;
    }
</style>
{% endblock %}

{% block content %}
<div class="container cp-page">
    <div class="cp-card fade-up">
        <div class="cp-icon"><i class="bi bi-key-fill"></i></div>
        <h1
            style="font-size:var(--text-xl);font-weight:800;text-align:center;margin-bottom:6px;letter-spacing:-0.02em;">
            修改密碼</h1>
        <p style="text-align:center;color:var(--t-secondary);font-size:13px;margin-bottom:24px;">更新您的帳號密碼以維護帳戶安全</p>

        <div class="pw-tip">
            <i class="bi bi-shield-check"></i>
            建議使用 8 位以上、包含英文大小寫與數字的強密碼
        </div>

        <form method="POST">
            {{ form.hidden_tag() }}
            <div class="form-group">
                {{ form.current_password.label(class='form-label') }}
                <div class="input-icon-wrap">
                    <i class="bi bi-lock iicon"
                        style="position:absolute;left:11px;top:50%;transform:translateY(-50%);color:var(--t-muted);"></i>
                    {{ form.current_password(class="form-input", placeholder="輸入目前密碼", style="padding-left:36px;") }}
                </div>
                {% for e in form.current_password.errors %}
                <div class="form-error"><i class="bi bi-exclamation-circle"></i>{{ e }}</div>
                {% endfor %}
            </div>
            <div class="form-group">
                {{ form.new_password.label(class='form-label') }}
                <div class="input-icon-wrap">
                    <i class="bi bi-lock-fill iicon"
                        style="position:absolute;left:11px;top:50%;transform:translateY(-50%);color:var(--t-muted);"></i>
                    {{ form.new_password(class="form-input", placeholder="輸入新密碼（至少 8 位）", style="padding-left:36px;") }}
                </div>
                {% for e in form.new_password.errors %}
                <div class="form-error"><i class="bi bi-exclamation-circle"></i>{{ e }}</div>
                {% endfor %}
            </div>
            <div class="form-group">
                {{ form.new_password2.label(class='form-label') }}
                <div class="input-icon-wrap">
                    <i class="bi bi-check-circle iicon"
                        style="position:absolute;left:11px;top:50%;transform:translateY(-50%);color:var(--t-muted);"></i>
                    {{ form.new_password2(class="form-input", placeholder="再次輸入新密碼", style="padding-left:36px;") }}
                </div>
                {% for e in form.new_password2.errors %}
                <div class="form-error"><i class="bi bi-exclamation-circle"></i>{{ e }}</div>
                {% endfor %}
            </div>
            <div style="display:flex;gap:10px;margin-top:6px;">
                {{ form.submit(class="btn btn-primary", style="flex:1;justify-content:center;") }}
                <a href="{{ url_for('profile') }}" class="btn btn-outline">
                    <i class="bi bi-arrow-left"></i> 返回
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}