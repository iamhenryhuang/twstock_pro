{% extends "layouts/base.html" %}

{% block title %}修改密碼 | TWStock Pro{% endblock %}

{% block extra_css %}
<style>
    .cp-page {
        min-height: 60vh;
        display: flex;
        align-items: center;
        padding: 3rem 0;
    }

    .cp-card {
        max-width: 480px;
        margin: 0 auto;
        width: 100%;
        background: var(--bg-card);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-xl);
        padding: 2.5rem;
        backdrop-filter: blur(12px);
    }

    .form-group {
        margin-bottom: 1.25rem;
    }

    .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--text-secondary);
    }

    .form-error {
        font-size: 0.78rem;
        color: var(--brand-red);
        margin-top: 0.375rem;
        display: flex;
        align-items: center;
        gap: 0.25rem;
    }
</style>
{% endblock %}

{% block content %}
<div class="container cp-page">
    <div class="cp-card">
        <div style="width:48px;height:48px;background:var(--grad-brand);border-radius:var(--radius-lg);
                     display:flex;align-items:center;justify-content:center;font-size:1.25rem;
                     margin:0 auto 1.5rem;box-shadow:var(--glow-cyan);">
            <i class="bi bi-key-fill" style="color:white;"></i>
        </div>

        <h1 style="font-size:1.5rem;font-weight:800;text-align:center;margin-bottom:0.375rem;">修改密碼</h1>
        <p style="text-align:center;color:var(--text-secondary);font-size:0.875rem;margin-bottom:2rem;">
            建議使用包含英文大小寫、數字的強密碼
        </p>

        <form method="POST">
            {{ form.hidden_tag() }}

            <div class="form-group">
                {{ form.current_password.label }}
                {{ form.current_password(class="input", placeholder="輸入目前密碼") }}
                {% for error in form.current_password.errors %}
                <div class="form-error"><i class="bi bi-exclamation-circle"></i>{{ error }}</div>
                {% endfor %}
            </div>

            <div class="form-group">
                {{ form.new_password.label }}
                {{ form.new_password(class="input", placeholder="輸入新密碼（至少8位）") }}
                {% for error in form.new_password.errors %}
                <div class="form-error"><i class="bi bi-exclamation-circle"></i>{{ error }}</div>
                {% endfor %}
            </div>

            <div class="form-group">
                {{ form.new_password2.label }}
                {{ form.new_password2(class="input", placeholder="再次輸入新密碼") }}
                {% for error in form.new_password2.errors %}
                <div class="form-error"><i class="bi bi-exclamation-circle"></i>{{ error }}</div>
                {% endfor %}
            </div>

            <div style="display:flex;gap:0.75rem;margin-top:0.5rem;">
                {{ form.submit(class="btn btn-primary") }}
                <a href="{{ url_for('profile') }}" class="btn btn-outline">
                    <i class="bi bi-arrow-left"></i> 返回
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}